pluginManagement {
    def rootDir = new File("/Users/iztel/Documents/getProps/getprops-mobile")
    def nodeBin = "/Users/iztel/.nvm/versions/node/v25.2.1/bin/node"
    
    repositories {
        google()
        mavenCentral()
        gradlePluginPortal()
    }

    def pluginRoot = new File(rootDir, "node_modules/@react-native/gradle-plugin")
    if (pluginRoot.exists()) {
        includeBuild(pluginRoot.absolutePath)
    }
}

plugins {
    id("com.facebook.react.settings")
}

def nodeBin = "/Users/iztel/.nvm/versions/node/v25.2.1/bin/node"
def rootDir = new File("/Users/iztel/Documents/getProps/getprops-mobile")

extensions.configure(com.facebook.react.ReactSettingsExtension) { ex ->
  def command = [
    nodeBin,
    '--no-warnings',
    '--eval',
    'require(require.resolve(\'expo-modules-autolinking\', { paths: [require.resolve(\'expo/package.json\')] }))(process.argv.slice(1))',
    'react-native-config',
    '--json',
    '--platform',
    'android'
  ].toList()
  ex.autolinkLibrariesFromCommand(command)
}

rootProject.name = 'GetProps'

dependencyResolutionManagement {
  versionCatalogs {
    reactAndroidLibs {
      def rnPath = new File(rootDir, "node_modules/react-native")
      if (rnPath.exists()) {
          from(files(new File(rnPath, "gradle/libs.versions.toml")))
      }
    }
  }
}

def expoDir = new File(rootDir, "node_modules/expo")
if (expoDir.exists()) {
    apply from: new File(expoDir, "scripts/autolinking.gradle")
    useExpoModules()
}

include ':app'

def rnPluginDir = new File(rootDir, "node_modules/@react-native/gradle-plugin")
if (rnPluginDir.exists()) {
    includeBuild(rnPluginDir.absolutePath)
}
